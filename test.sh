#!/usr/bin/env bash

set -Eeuo pipefail


cd rt-thread-w60x
export PATH="/opt/arm/gcc-arm-none-eabi-10-2020-q4-major/bin/:$PATH"
rm -f  build/user/applications/src/io.o
arm-none-eabi-gcc -o build/user/applications/src/io.o -c -mcpu=cortex-m3 -mthumb -ffunction-sections -fdata-sections -std=gnu99 -fno-common -fomit-frame-pointer -fno-short-enums -fsigned-char -O0 -gdwarf-2 -g -Wall -Wextra -Wundef -Wmissing-declarations -Wredundant-decls -Wunreachable-code -Winline -Wdisabled-optimization -Werror -Werror=implicit-function-declaration -DBUILD_ENV=debug -DHAVE_CCONFIG_H -D_REENT_SMALL -DWM_W600 -D__RTTHREAD__ -DRT_USING_NEWLIB -Iinclude -I. -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/applications/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/ports/easyflash -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/ports/fal -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/pahomqtt-v1.1.0/MQTTPacket/src -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/pahomqtt-v1.1.0/MQTTClient-RT -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/netutils-v1.1.0/ntp -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/mbedtls-v2.7.10/mbedtls/include -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/mbedtls-v2.7.10/ports/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/EasyFlash-v4.1.0/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/fal-v0.5.0/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Include -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Include/Driver -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Drivers/spi -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Include/OS -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Include/Platform -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Include/WiFi -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Common/Params -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Common/crypto -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Common/crypto/digest -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Common/crypto/math -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Common/crypto/symmetric -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/wm_libraries-latest/Platform/Boot/gcc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/agile_button-latest/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/packages/agile_led-latest/inc -Ibuild/user/config-tool-client/w60x-config-tool/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/config-tool-client/library/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/config-tool-client/w60x-config-tool/inc -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/config-tool-client/w60x-config-tool/inc -Iuser/config-tool-client/w60x-config-tool/inc -Ibuild/user/config-tool-client/w60x-config-tool/client -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/config-tool-client/library/client -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/config-tool-client/w60x-config-tool/client -I/data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/config-tool-client/w60x-config-tool/client -Iuser/config-tool-client/w60x-config-tool/client -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/bsp/w60x/drivers -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/libcpu/arm/common -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/libcpu/arm/cortex-m3 -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/dfs/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/dfs/filesystems/devfs -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/drivers/hwcrypto -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/drivers/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/drivers/wlan -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/finsh -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/libc/compilers/common -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/libc/compilers/newlib -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/lwip-2.1.2/src -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/lwip-2.1.2/src/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/lwip-2.1.2/src/arch/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/lwip-2.1.2/src/include/netif -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/netdev/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/sal_socket/include -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/sal_socket/include/socket -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/sal_socket/impl -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/sal_socket/include/dfs_net -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/net/sal_socket/include/socket/sys_socket -I/data/DevelopmentRoot/github.com/RT-Thread/rt-thread/components/utilities/ulog /data/DevelopmentRoot/github.com/gongt/w60x-mqtt-powerplug/applications/src/io.c

echo "DONE!"
